# 2025-1 고급 백엔드 스터디 week2

- # 칼럼형 DBMS 대 로우형 DBMS

  - 데이터를 디스크에 저장하는 방식에 따라 데이터베이스를 분류할 수 있다.

    - 칼럼 저장 방식: 테이블을 수직 분할한다. 같은 칼럼에 속하는 값들을 함꼐 저장한다.
    - 로우 저장 방식: 테이블을 수평 분할한다. 같은 로우에 속하는 값들을 함께 저장한다.

  - ## 로우형 데이터 레이아웃

    - `로우형 DBMS(Row Oriented DBMS)`는 데이터 레코드를 로우 형식으로 저장한다.
    - 여러 field(이름, 생년월일, 전화번호)의 값을 고유 식별 키로 구분할 수 있는 레코드 형식에 적합하다.
    - 로우 단위로 저장하면 공간 지역성(saptial locality)를 극대화할 수 있다.
    - 특정 사용자의 모든 정보를 읽을 때는 효율적이지만, 여러 사용자의 특정 필드를 읽을 때는 비효율적이다.

  - ## 칼럼형 데이터 레이아웃
    - `칼럼형 DBMS(Column Oriented DBMS)`는 데이터를 칼럼 단위로 저장한다. 같은 칼럼끼리 디스크에 연속해 저장하는 방식이다.
    - 데이터의 추세와 평균 등을 계산하는 집계 분석 작업에 적합하다.
    - 칼럼형 DBMS에서 조인과 필터링, 다중 로우 집계 등을 위해 튜플을 재구성하려면 칼럼 사이의 관계를 정의하는 `메타데이터`가 필요하다.
  - ## 차이점과 최적화 기법
    - 칼럼형과 로우형 DBMS 중 어떤 것을 사용할지 선택하려면 액세스 패턴을 파악해야 한다.
      - 데이터를 레코드 단위로 접근하고, 일반 쿼리와 범위 스캔 요청이 많다면 로우형 DBMS가 적합하다.
      - 많은 로우를 스캔하거나 일부 칼럼에 대한 집계 작업이 많다면 칼럼형 DBMS가 적합나다.

- # 데이터 파일과 인덱스 파일

  - 데이터베이스 시스템은 일반 파일 형식이 아닌, 그 구현 방식에 맞는 특수한 포맷을 사용한다. 이유는 다음과 같다.

    - `저장 효용성` : 데이터 레코드의 저장 오버헤드를 최소화하는 방식으로 파일을 구성할 수 있다.
    - `접근 효율성` : 최소한의 단계로 원하는 레코드를 찾을 수 있다.
    - `갱신 효율성` : 디스크 쓰기를 최소화하는 방식으로 레코드를 갱신할 수 있다.

  - 데이터베이스 시스템은 데이터 레코드를 테이블 방식으로 저장하고, 각 레코드는 검색 키로 찾을 수 있다.

    - 레코드의 위치를 찾아내는 데는 인덱스를 사용한다.

  - ## 데이터 파일

    - 데이터 파일(혹은 프라이머리 파일, Primary File)은 `인덱스 구조형 테이블(IOT, Index-Organized Table)`, `힙 구조형 테이블(힙 파일, Heap-Organized Table)`, `해시 구조형 테이블(해시 파일, Hash-Organized Table)`을 기반으로 한다.
    - ### 인덱스 구조형 테이블
      - 인덱스에 실제 데이터 레코드를 저장한다.
      - 데이터는 키 순서로 정렬된다.
    - ### 힙 파일
      - 레코드의 특정 순서를 따르지 않는다. 대체로 삽입 순서대로 저장한다.
      - 데이터 검색 시 데이터의 실제 위치를 나타내는 인덱스가 필요하다.
    - ### 해시 파일
      - 레코드를 각 키의 해시 갑셍 해당되는 버킷에 저장한다.
      - 버킷 내 레코드는 삽입 순서대로 저장하거나 키 순서로 정렬하면 조회 속도를 향상시킬 수 있다.

  - ## 인덱스 파일
    - 인덱스 파일은 데이터 레코드를 식별할 수 있는 키(힙 파일의 경우) 또는 기본 키를 데이터 파일에서 해당 레코드의 위치에 매핑한다.
      - ### 기본 인덱스(Primary Index)
        - 프라이머리(데이터) 파일에 대한 인덱스
        - 기본 키 또는 기본 키 역할을 할 수 있는 여러 키의 조합에 대한 인덱스이다. 다른 인덱스는 모두 보조 인덱스이다.
      - ### 보조 인덱스(Secondary Index)
        - 데이터 레코드를 직접 가리키거나 해당 레코드의 기본 키를 저장한다.
        - 기본 인덱스 파일은 키별로 하나의 레코드만을 가리키지만, 보조 인덱스는 키별로 여러 레코드를 가리킬 수도 있다.
      - ### 클러스터형 인덱스(Clustered Index)
        - 실제 데이터 레코드의 정렬 순서와 검색 키의 정렬 순서가 같은 인덱스
        - 클러스터형 인덱스의 데이터 레코드는 보통 같은 인덱스 파일 또는 클러스터형 파일에 정렬해 저장한다.
        - 비클러스터형 인덱스 : 데이터가 다른 파일에 저장되어 있고 인덱스 키를 기준으로 정렬되지 않은 인덱스

- # 버퍼링과 불변성, 순서화
  - ## 버퍼링
    - 디스크에 쓰기 전에 일부를 메모리에 저장하는 것을 의미한다. 모든 디스크 기반 자료 구조에서는 버퍼를 어느 정도 사용한다.
  - ## 가변성
    - 불변성이라고도 하며, 파일 일부를 읽고 갱신한 뒤에 똑같은 자리에 다시 쓸지에 대한 여부를 나타내는 속성이다.
  - ## 순서화
    - 디스크 페이지에 데이터 레코드를 키 순서로 저장하는 것을 의미한다.